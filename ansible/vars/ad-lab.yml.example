---
# Variables for Red Team / Pentesting Lab
# Copy to ad-lab.yml and customize for your environment

# --- Proxmox Connection ---
proxmox_host: "10.0.2.11"
proxmox_node: "proxmox-host"
proxmox_api_user: "deploy-svc@pam"
proxmox_api_token_id: "ansible"
# proxmox_api_token_secret is in vars/vault.yml

# --- Storage ---
vm_storage: "vmpool"
iso_storage: "iso-store"
iso_path: "/pool/isos/template/iso"
cloud_image_dir: "/tmp/cloud-images"

# --- Network ---
lab_bridge: "vmbr2"
lab_subnet: "10.0.10.0/24"
lab_gateway: "10.0.10.1"
lab_netmask: "255.255.255.0"
lab_cidr: 24
lab_dns: "10.0.10.10"

# --- Cloud-Init Defaults ---
cloudinit_user: "labadmin"
cloudinit_ssh_key: "{{ lookup('file', '~/.ssh/id_ed25519.pub') }}"
cloudinit_dns_domain: "lab.local"

# --- VirtIO Drivers ISO ---
virtio_iso: "virtio-win.iso"
virtio_iso_url: "https://fedorapeople.org/groups/virt/virtio-win/direct-downloads/stable-virtio/virtio-win.iso"

# --- Cloud Image Sources ---
cloud_images:
  ubuntu_2404:
    url: "https://cloud-images.ubuntu.com/releases/24.04/release/ubuntu-24.04-server-cloudimg-amd64.img"
    filename: "ubuntu-24.04-server-cloudimg-amd64.img"
    format: "raw"
  debian_12:
    url: "https://cloud.debian.org/images/cloud/bookworm/latest/debian-12-genericcloud-amd64.qcow2"
    filename: "debian-12-genericcloud-amd64.qcow2"
    format: "qcow2"

# --- Template Definitions (VMID 100-109) ---
templates:
  win10_ltsc:
    vmid: 100
    name: "tmpl-win10-ltsc"
    iso: "windows-10-iot-ltsc-2021.iso"
    disk_size: "60G"
    memory: 4096
    cores: 2
    bios: "ovmf"
    tpm: true
    machine: "q35"
    os_type: "win10"
    virtio_iso: true

  winserver_2022:
    vmid: 101
    name: "tmpl-winserver-2022"
    iso: "windows-server-2022-eval.iso"
    disk_size: "60G"
    memory: 4096
    cores: 2
    bios: "ovmf"
    tpm: true
    machine: "q35"
    os_type: "win10"
    virtio_iso: true

  kali:
    vmid: 104
    name: "tmpl-kali"
    iso: "kali-linux-installer-amd64.iso"
    disk_size: "60G"
    memory: 4096
    cores: 2
    bios: "ovmf"
    machine: "q35"
    os_type: "l26"

  parrot:
    vmid: 105
    name: "tmpl-parrot"
    iso: "parrot-security-amd64.iso"
    disk_size: "60G"
    memory: 4096
    cores: 2
    bios: "seabios"
    machine: "q35"
    os_type: "l26"

  seconion:
    vmid: 108
    name: "tmpl-seconion"
    iso: "securityonion-2.4.iso"
    disk_size: "200G"
    memory: 16384
    cores: 4
    bios: "seabios"
    machine: "q35"
    os_type: "l26"

# --- Lab VM Definitions (VMID 200+) ---
lab_vms:
  ad_dc_01:
    vmid: 200
    name: "AD-DC-01"
    template_vmid: 101
    memory: 4096
    cores: 2
    ip: "10.0.10.10"
    disk_size: "60G"

  kali_01:
    vmid: 201
    name: "KALI-01"
    template_vmid: 104
    memory: 4096
    cores: 2
    ip: "10.0.10.20"
    disk_size: "60G"

  commando_01:
    vmid: 202
    name: "COMMANDO-01"
    template_vmid: 100
    memory: 4096
    cores: 2
    ip: "10.0.10.30"
    disk_size: "60G"

  ubuntu_ad_01:
    vmid: 204
    name: "UBUNTU-AD-01"
    template_vmid: 102
    memory: 2048
    cores: 2
    ip: "10.0.10.60"
    disk_size: "20G"
    cloudinit: true

  seconion_01:
    vmid: 207
    name: "SECONION-01"
    template_vmid: 108
    memory: 16384
    cores: 4
    ip: "10.0.10.90"
    disk_size: "200G"

# --- LXC Container Definitions (CTID 210+) ---
lab_lxc:
  parrot_lxc_01:
    ctid: 210
    hostname: "parrot-lxc-01"
    template: "debian-12-standard_12.7-1_amd64.tar.zst"
    memory: 2048
    swap: 1024
    cores: 2
    rootfs_size: 20
    ip: "10.0.10.50"
    unprivileged: true
    nesting: true

# --- AD Domain Configuration ---
ad_domain: "lab.local"
ad_netbios: "LAB"
ad_admin_user: "Administrator"
ad_safe_mode_password: "{{ vault_ad_safe_mode_password }}"
